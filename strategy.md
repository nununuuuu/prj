# 交易策略說明書

## 1. 策略邏輯定義 

本專案採用 **「雙均線趨勢策略 」** 結合 **「RSI 動能濾網 」** 的複合式交易邏輯。旨在捕捉中長期趨勢，同時利用震盪指標過濾掉過熱的進場點。

### 核心技術指標
1.  **短期移動平均線 (SMA_Fast)**：參數預設 `10` 日，反應近期價格動能。
2.  **長期移動平均線 (SMA_Slow)**：參數預設 `20` 日 (或 60 日)，定義主要趨勢方向。
3.  **相對強弱指標 (RSI)**：參數預設 `14` 日，用於判斷市場超買/超賣狀態。

###  進場條件 
當以下 **兩個條件同時成立** 時，執行買入（做多）：

1.  **趨勢確立 (黃金交叉)**：
    *   短期均線 **由下往上突破** 長期均線 (`SMA_Fast > SMA_Slow`)。
    *   *意義：* 短期動能強於長期趨勢，代表多頭行情可能啟動。
2.  **位階過濾 (RSI 安全區)**：
    *   RSI 指標數值 **小於 70**。
    *   *意義：* 確保進場時市場未進入「超買區 (Overbought)」，避免在價格乖離過大時追高。

###  出場與風控條件
當滿足 **下列任一條件** 時，執行賣出（平倉）：

1.  **趨勢反轉 (死亡交叉)**：
    *   短期均線 **由上往下跌破** 長期均線 (`SMA_Fast < SMA_Slow`)。
    *   *意義：* 多頭趨勢結束或轉弱，立即離場以保住獲利或減少損失。
2.  **停損 (Stop Loss)**：
    *   當價格跌破進場成本的 **N%** (例如 10%)。
    *   *意義：* 強制止損，防止單筆交易造成本金重創。
3.  **停利 (Take Profit)**：
    *   當價格上漲超過進場成本的 **M%** (例如 20%)。
    *   *意義：* 達到預期獲利目標，落袋為安。

---

## 2. 策略合理性與理論依據 

本策略並非隨機猜測，而是基於經典金融理論所設計，其有效性建立在以下基礎上：

### A. 為什麼使用雙均線？
*   **理論依據**：道氏理論 (Dow Theory)。
*   **為何有效**：
    *   金融市場存在「趨勢慣性」，一旦趨勢形成，價格傾向於沿著趨勢方向移動一段時間。
    *   移動平均線 (MA) 具有「平滑雜訊」的功能，能過濾掉單日的隨機波動。
    *   雙均線系統能有效捕捉波段的「魚身」，雖然無法買在最低、賣在最高，但能確保吃到趨勢中段最穩定的利潤。

### B. 為什麼加入 RSI 濾網？ 
*   **理論依據**：均值回歸 (Mean Reversion)。
*   **為何有效**：
    *   純粹的均線策略常面臨「假突破」與「追高風險」。在強勢上漲的末段，均線依然會呈現多頭排列，但此時價格往往已經過度乖離。
    *   透過限制 `RSI < 70`，我們強制策略 **「放棄過熱的進場點」**。這能顯著提升勝率，避免在市場情緒最亢奮（高點）時接盤。

### C. 風險管理的重要性 
*   **理論依據**：不對稱風險與凱利公式精神。
*   **為何有效**：
    *   沒有策略是 100% 準確的。在震盪盤整期，均線策略容易頻繁停損 (Whipsaw)。
    *   加入「固定百分比停損」是生存的關鍵，確保在看錯方向時能果斷截斷虧損，保留實力等待下一次趨勢。

---

## 3. 程式實作映射 

本策略使用 Python 的 `backtesting.py` 框架實作，關鍵邏輯如下：

```python
def next(self):
    # 1. 檢查是否持有部位
    if self.position:
        # 出場邏輯：死亡交叉
        if self.sma1[-1] < self.sma2[-1]:
            self.position.close()
            
    # 2. 檢查進場機會
    else:
        # 進場邏輯：黃金交叉 AND RSI 不過熱
        if self.sma1[-1] > self.sma2[-1] and self.rsi[-1] < 70:
            self.buy(
                sl = price * (1 - self.sl_pct),  # 設定停損價
                tp = price * (1 + self.tp_pct)   # 設定停利價
            )